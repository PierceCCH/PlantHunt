{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect, createContext } from \"react\";\nimport * as tf from \"@tensorflow/tfjs\";\nimport { bundleResourceIO } from '@tensorflow/tfjs-react-native';\nimport modelJSON from \"../assets/new_model/model.json\";\nimport modelWeights from \"../assets/new_model/modelWeights.bin\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var ModelContext = createContext();\nexport var ModelProvider = function ModelProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    model = _useState2[0],\n    setModel = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var loadModel = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var plantModel = yield tf.loadGraphModel(bundleResourceIO(modelJSON, modelWeights)).catch(function (e) {\n        console.log(\"[LOADING ERROR] info:\", e);\n      });\n      return plantModel;\n    });\n    return function loadModel() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    var init = function () {\n      var _ref3 = _asyncToGenerator(function* () {\n        setLoading(true);\n        yield tf.ready();\n        var res = yield loadModel();\n        setModel(res);\n        setLoading(false);\n      });\n      return function init() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    init();\n  }, []);\n  return _jsx(ModelContext.Provider, {\n    value: {\n      model: model,\n      loading: loading\n    },\n    children: children\n  });\n};","map":{"version":3,"names":["React","useState","useEffect","createContext","tf","bundleResourceIO","modelJSON","modelWeights","jsx","_jsx","ModelContext","ModelProvider","_ref","children","_useState","_useState2","_slicedToArray","model","setModel","_useState3","_useState4","loading","setLoading","loadModel","_ref2","_asyncToGenerator","plantModel","loadGraphModel","catch","e","console","log","apply","arguments","init","_ref3","ready","res","Provider","value"],"sources":["/Users/aaron68lee/Documents/Coding-Projects/PlantHunt/src/ModelContext.js"],"sourcesContent":["import React, { useState, useEffect, createContext } from \"react\";\nimport * as tf from \"@tensorflow/tfjs\";\nimport {bundleResourceIO} from '@tensorflow/tfjs-react-native'\nimport modelJSON from \"../assets/new_model/model.json\";\nimport modelWeights from \"../assets/new_model/modelWeights.bin\";\n\nexport const ModelContext = createContext();\n\nexport const ModelProvider = ({ children }) => {\n  const [model, setModel] = useState();\n  const [loading, setLoading] = useState(true);\n\n  const loadModel = async()=>{\n      const plantModel = await tf.loadGraphModel(\n          bundleResourceIO(modelJSON, modelWeights)\n      ).catch((e)=>{\n        console.log(\"[LOADING ERROR] info:\",e)\n      })\n      return plantModel\n  }\n\n  useEffect(() => {\n    const init = async () => {\n      setLoading(true);\n      await tf.ready();\n      const res = await loadModel();\n      setModel(res);\n      setLoading(false);\n    };\n\n    init();\n  }, []);\n\n  return (\n    <ModelContext.Provider value={{ model, loading }}>\n      {children}\n    </ModelContext.Provider>\n  );\n};\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,aAAa,QAAQ,OAAO;AACjE,OAAO,KAAKC,EAAE,MAAM,kBAAkB;AACtC,SAAQC,gBAAgB,QAAO,+BAA+B;AAC9D,OAAOC,SAAS;AAChB,OAAOC,YAAY;AAA6C,SAAAC,GAAA,IAAAC,IAAA;AAEhE,OAAO,IAAMC,YAAY,GAAGP,aAAa,EAAE;AAE3C,OAAO,IAAMQ,aAAa,GAAG,SAAhBA,aAAaA,CAAAC,IAAA,EAAqB;EAAA,IAAfC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;EACtC,IAAAC,SAAA,GAA0Bb,QAAQ,EAAE;IAAAc,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA7BG,KAAK,GAAAF,UAAA;IAAEG,QAAQ,GAAAH,UAAA;EACtB,IAAAI,UAAA,GAA8BlB,QAAQ,CAAC,IAAI,CAAC;IAAAmB,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAArCE,OAAO,GAAAD,UAAA;IAAEE,UAAU,GAAAF,UAAA;EAE1B,IAAMG,SAAS;IAAA,IAAAC,KAAA,GAAAC,iBAAA,CAAG,aAAS;MACvB,IAAMC,UAAU,SAAStB,EAAE,CAACuB,cAAc,CACtCtB,gBAAgB,CAACC,SAAS,EAAEC,YAAY,CAAC,CAC5C,CAACqB,KAAK,CAAC,UAACC,CAAC,EAAG;QACXC,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAACF,CAAC,CAAC;MACxC,CAAC,CAAC;MACF,OAAOH,UAAU;IACrB,CAAC;IAAA,gBAPKH,SAASA,CAAA;MAAA,OAAAC,KAAA,CAAAQ,KAAA,OAAAC,SAAA;IAAA;EAAA,GAOd;EAED/B,SAAS,CAAC,YAAM;IACd,IAAMgC,IAAI;MAAA,IAAAC,KAAA,GAAAV,iBAAA,CAAG,aAAY;QACvBH,UAAU,CAAC,IAAI,CAAC;QAChB,MAAMlB,EAAE,CAACgC,KAAK,EAAE;QAChB,IAAMC,GAAG,SAASd,SAAS,EAAE;QAC7BL,QAAQ,CAACmB,GAAG,CAAC;QACbf,UAAU,CAAC,KAAK,CAAC;MACnB,CAAC;MAAA,gBANKY,IAAIA,CAAA;QAAA,OAAAC,KAAA,CAAAH,KAAA,OAAAC,SAAA;MAAA;IAAA,GAMT;IAEDC,IAAI,EAAE;EACR,CAAC,EAAE,EAAE,CAAC;EAEN,OACEzB,IAAA,CAACC,YAAY,CAAC4B,QAAQ;IAACC,KAAK,EAAE;MAAEtB,KAAK,EAALA,KAAK;MAAEI,OAAO,EAAPA;IAAQ,CAAE;IAAAR,QAAA,EAC9CA;EAAQ,EACa;AAE5B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}